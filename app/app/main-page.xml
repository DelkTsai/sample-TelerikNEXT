<Page xmlns="http://www.nativescript.org/tns.xsd"
  loaded="pageLoaded" xmlns:tsb="app/TelerikUI/side-bar">
  <tsb:SideBar>
    <tsb:SideBar.slideContent>
      <StackLayout style="background-color: #053140;">
        <Image src="res://logo" cssClass="slide-out-img" stretch="none" />
        <Button tap="{{ selectView }}" cssClass="{{ selectedViewIndex === 0 ? 'slide-out-btn' : 'slide-out-btn-selected' }}" text="My agenda" />
        <Button tap="{{ selectView }}" cssClass="{{ selectedViewIndex === 1 ? 'slide-out-btn' : 'slide-out-btn-selected' }}" text="All sessions" />
        <Button tap="{{ selectView }}" cssClass="{{ selectedViewIndex === 2 ? 'slide-out-btn' : 'slide-out-btn-selected' }}" text="About" />
      </StackLayout>
    </tsb:SideBar.slideContent>

    <tsb:SideBar.mainContent>
      <GridLayout>

        <GridLayout rows="auto, auto, *" visibility="{{ selectedViewIndex !== 2 ? 'visible' : 'collapsed' }}">
          <!-- Header -->
          <StackLayout cssClass="page-header">
            <GridLayout style="background-color: #55000000" cssClass="action-bar-offset">
              <SegmentedBar selectedBackgroundColor="#fac950" selectedIndex="{{ selectedIndex }}"  style="background-color: transparent;color: white;">
                <SegmentedBar.items>
                  <SegmentedBarItem title="MAY 3" />
                  <SegmentedBarItem title="MAY 4" />
                  <SegmentedBarItem title="MAY 5" />
                </SegmentedBar.items>
              </SegmentedBar>
            </GridLayout>
            <Label cssClass="page-title" horizontalAlignment="center" margin="15">
              <Label.formattedText>
                <FormattedString>
                  <FormattedString.spans>
                    <Span text="{{ dayHeader }}" fontAttributes="Bold" />
                  </FormattedString.spans>
                </FormattedString>
              </Label.formattedText>
            </Label>
          </StackLayout>

          <!-- Search -->
          <SearchBar text="{{ search }}" hint="Search" cssClass="search" textFieldBackgroundColor="white" row="1" />

          <!-- List -->
          <ListView items="{{ sessions }}" row="2" separatorColor="#fac950" itemTap="selectSession">
            <ListView.itemTemplate>
              <GridLayout columns="auto, *" cssClass="{{ canBeFavorited ? 'list-view-row' : 'break-row' }}">

                <Image stretch="none" tap="toggleFavorite" cssClass="favourite-image" 
                  src="{{ favorite ? 'res://ic_add_to_fav_1' : 'res://ic_add_to_fav' }}"
                  visibility="{{ canBeFavorited ? 'visible' : 'collapsed' }}"
                 />

                 <StackLayout col="1">

                  <Label cssClass="info-orange">
                    <Label.formattedText>
                      <FormattedString>
                        <FormattedString.spans>
                          <Span text="{{ range }}" fontAttributes="Bold" />
                        </FormattedString.spans>
                      </FormattedString>
                    </Label.formattedText>
                  </Label>

                  <Label text="{{ title }}" textWrap="true" cssClass="info-bigger"/>

                  <Label visibility="{{ room ? 'visible' : 'collapsed' }}" text="{{ room }}" cssClass="info-orange" />

                </StackLayout>

              </GridLayout>
            </ListView.itemTemplate>
          </ListView>

          <ActivityIndicator busy="{{ isLoading }}" row="2" horizontalAlignment="center" verticalAlignment="center" />

        </GridLayout>

        <Border style="background-color: #053140;" visibility="{{ selectedViewIndex === 2 ? 'visible' : 'collapsed' }}">
          <Image src="res://logo" stretch="none" verticalAlignment="center" horizontalAlignment="center" />
        </Border>

      </GridLayout>
    </tsb:SideBar.mainContent>
  </tsb:SideBar>



</Page>